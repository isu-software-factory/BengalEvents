FROM ruby:2.5
RUN apt-get update -qq && apt-get install -y nodejs postgresql-client vim nano
RUN mkdir /application
WORKDIR /application



COPY Gemfile /application/Gemfile
COPY Gemfile.lock /application/Gemfile.lock

RUN gem install bundler
RUN bundle install
COPY . /application

# run for secret_key_base
#  docker-compose run --rm -e EDITOR=vim web bin/rails credentials:edit

EXPOSE 22

CMD ["rails", "server", "-b", "0.0.0.0"]